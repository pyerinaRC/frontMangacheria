<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/blasten/turn.js@4/turn.min.js"></script>

    <link href="../css/style3.css" rel="stylesheet">

    <title>La Mangachería</title>
</head>

<body>
    <!-- Navbar fija -->
    <div class="navbar-wrapper">
        <nav class="navbar navbar-expand-lg navbar-custom">
            <div class="container-fluid">
                <div class="d-lg-none d-flex align-items-center">
                    <button class="navbar-toggler text-white border-0 me-2" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarContent">
                        <i class="fas fa-bars fa-lg"></i>
                    </button>
                    <span class="navbar-brand mb-0 h1 text-white">LA MANGACHERÍA</span>
                </div>
                <div class="collapse navbar-collapse justify-content-center justify-content-lg-center full-screen-menu"
                    id="navbarContent">
                    <ul class="navbar-nav flex-lg-row flex-column text-center">
                        <li class="nav-item"><a class="nav-link" href="../index.html">INICIO</a></li>
                        <li class="nav-item"><a class="nav-link" href="nosotros.html">NOSOTROS</a></li>
                        <li class="nav-item"><a class="nav-link" href="comic.html">CÓMIC</a></li>
                        <li class="nav-item"><a class="nav-link" href="videoblog.html">VIDEOBLOGS</a></li>
                        <li class="nav-item"><a class="nav-link" href="game.html">JUEGO</a></li>
                        <li class="nav-item"><a class="nav-link" href="foros.html">FORO</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <!-- portada -->
    <section class="hero comic">
        <div class="hero-content">
            <div class="comic-block text-center position-relative">
                <span class="badge-comic position-absolute">CÓMIC</span>
                <img src="../img/card-1.jpeg" alt="Infancia Mangache" class="comic-img my-3">
                <h2 class="comic-title">INFANCIA MANGACHE:<br>HISTORIAS Y TRADICIONES DESCONOCIDAS</h2>
            </div>

        </div>
    </section>


    <div id="comic-loader" class="comic-loader">
        <div class="skeleton"></div>
        <div class="skeleton"></div>
    </div>


    <section class="comic-book">
        <div class="comic-container">
            <button class="comic-btn left" onclick="prevPage()" id="btn-prev"><i
                    class="fas fa-chevron-left"></i></button>

            <div class="comic-page active" id="page-0">
                <img src="../img/comic-1.png" class="comic-imgs img-left">
                <img src="../img/comic-1.png" class="comic-imgs img-right">
            </div>
            <div class="comic-page" id="page-1">
                <img src="../img/comic-1.png" class="comic-imgs img-left">
                <img src="../img/comic-1.png" class="comic-imgs img-right">
            </div>
            <div class="comic-page" id="page-2">
                <img src="../img/comic-1.png" class="comic-imgs img-left">
                <img src="../img/comic-1.png" class="comic-imgs img-right">
            </div>

            <button class="comic-btn right" onclick="nextPage()" id="btn-next"><i
                    class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container text-center footerContainer">
            <div class="socialIcons">
                <a href="https://www.tiktok.com/@memoria_mangache?is_from_webapp=1&sender_device=pc" target="_blank"><i
                        class="fa-brands fa-tiktok"></i></a>
                <a href="https://www.instagram.com/memoria_mangache?utm_source=ig_web_button_share_sheet&igsh=N25rMWpzMzRucGI1"
                    target="_blank"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://youtube.com/@memoria_mangache?si=cHfN3fAHA73nBBJT" target="_blank"><i
                        class="fa-brands fa-youtube"></i></a>
            </div>
            <div class="footerNav">
                <ul>
                    <li><a href="../index.html">Inicio</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                    <li><a href="comic.html">Cómic</a></li>
                    <li><a href="videoblog.html">Videoblogs</a></li>
                    <li><a href="game.html">Juego</a></li>
                    <li><a href="foros.html">Foro</a></li>
                </ul>
            </div>
        </div>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const isMobile = window.innerWidth <= 768;
        const container = document.querySelector('.comic-container');
        const loader = document.getElementById('comic-loader');

        document.querySelectorAll('.comic-page').forEach(p => p.remove());

        const imageSources = [
            '../img/comic-1.png',
            '../img/comic-2.png',
            '../img/comic-3.png',
            '../img/comic-4.png',
            '../img/comic-5.png',
            '../img/comic-6.png'
        ];

        let pageElements = [];
        let loadedImages = 0;

        function imageLoaded() {
            loadedImages++;
            if (loadedImages === imageSources.length) {
                loader.style.display = 'none';
                showPage(currentPage);
            }
        }

        function createImage(src) {
            const img = new Image();
            img.src = src;
            img.className = 'comic-imgs';
            img.onload = imageLoaded;
            return img;
        }

        if (isMobile) {
            imageSources.forEach((src, i) => {
                const page = document.createElement('div');
                page.className = 'comic-page';
                page.id = `page-${i}`;
                const img = createImage(src);
                page.appendChild(img);
                container.insertBefore(page, document.getElementById('btn-next'));
                pageElements.push(page);
            });
        } else {
            for (let i = 0; i < imageSources.length; i += 2) {
                const page = document.createElement('div');
                page.className = 'comic-page';
                page.id = `page-${i / 2}`;
                const img1 = createImage(imageSources[i]);
                page.appendChild(img1);
                if (imageSources[i + 1]) {
                    const img2 = createImage(imageSources[i + 1]);
                    img2.classList.add('img-right');
                    page.appendChild(img2);
                }
                container.insertBefore(page, document.getElementById('btn-next'));
                pageElements.push(page);
            }
        }

        let currentPage = 0;
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');

        function updateButtons() {
            btnPrev.style.display = currentPage === 0 ? 'none' : 'block';
            btnNext.style.display = currentPage === pageElements.length - 1 ? 'none' : 'block';
        }

        function showPage(index) {
            pageElements.forEach((page, i) => {
                page.classList.toggle('active', i === index);
            });
            updateButtons();
        }

        btnNext.onclick = () => {
            if (currentPage < pageElements.length - 1) {
                currentPage++;
                showPage(currentPage);
            }
        };

        btnPrev.onclick = () => {
            if (currentPage > 0) {
                currentPage--;
                showPage(currentPage);
            }
        };
    </script>

</body>

</html>